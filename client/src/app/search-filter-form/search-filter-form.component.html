<div class="search-filter row col s12">
    <div class="search">
        <div class="row filter col s12 grey lighten-5">
            <div class="col s3">
                <div class="input-field">
                    <span class="brand">ціна</span>
                    <select class="browser-default" (change)="isPriceSelect($event)" #priceSelector>
                        <option value="" selected>ціна</option>
                        <option [value]="!isPrice">за зростанням</option>
                    </select>
                </div>
            </div>
            <div class="col s3">
                <div class="input-field">
                    <span class="brand">бренд</span>
                    <select class="browser-default" (change)="brandSelect($event)" #brandSelector>
                        <option value="" selected>бренд</option>
                        <option *ngFor="let brand of brandNameArr" [value]="brand">
                            {{brand}}
                        </option>
                    </select>
                </div>
            </div>

            <div class="input-field col s6 mr0 white">
                <i class="search-icon material-icons prefix ">search</i>
                <input id="icon_prefix" type="text" class="validate" [minlength]="minLength" [(ngModel)]="searchStr" (ngModelChange)="handleChange()">
                <label class="search" for="icon_prefix">Пошук... </label>
                <span class="helper-text mb0" data-error="Мінімальна довжина слова 3 символи" data-success="Пошук..."></span>
            </div>
        </div>
    </div>
</div>

<div *ngIf="isSearch">
    <div class="card-width">
        <div *ngFor="let position of foundPositions | filter: searchStr | paginate: {itemsPerPage: 4,currentPage: p};" class="card col s12 m6 l4" #empty>
            <div class="card-image waves-effect waves-block waves-light mb0">
                <img class="img activator center-block" src={{position.imageSrc}}>
            </div>
            <div class="card-content">
                <hr class="hr1">
                <div class="card-title activator grey-text text-darken-4">
                    <div class="name" [title]="position.name">{{position.name}}</div>
                </div>
                <hr class="hr1">
                <div class="cost center mb4">{{position.cost}} грн</div>
                <div *ngIf="position.quantity" class="availability green-text center mt4">в наявності</div>
                <div *ngIf="!position.quantity" class="availability blue-text center mt4">очікується</div>
            </div>
            <div class="card-action mt0 center-align" (click)="onSelectFoundPosition(position)">
                <button class="add waves-effect waves-light btn " (click)="open()" [disabled]="!position.quantity"><i
                        class="addIcon material-icons ">shopping_cart</i></button>
            </div>
            <div class="card-reveal">
                <span class="card-title text-size grey lighten-5">{{position.name}}<i
                        class="material-icons right">close</i></span>
                <p>{{position.description}}</p>
            </div>
        </div>
        <div class="col s12">
            <pagination-controls (pageChange)="p = $event" previousLabel="" nextLabel=""></pagination-controls>
        </div>
        <ng-template #empty>
            <div *ngIf="foundPositions.length == 0" class="center-align mt4">Збіг не знайдено!</div>
        </ng-template>
    </div>
</div>

<div *ngIf="isBrand">
    <div class="card-width">
        <div *ngFor="let position of brandPositions | filter: brandSelected | paginate: {itemsPerPage: 4,currentPage: p};" class="card col s12 m6 l4">
            <div class="card-image waves-effect waves-block waves-light mb0">
                <img class="img activator center-block" src={{position.imageSrc}}>
            </div>
            <div class="card-content">
                <hr class="hr1">
                <div class="card-title activator grey-text text-darken-4">
                    <div class="name" [title]="position.name">{{position.name}}</div>
                </div>
                <hr class="hr1">
                <div class="cost center mb4">{{position.cost}} грн</div>
                <div *ngIf="position.quantity" class="availability green-text center mt4">в наявності</div>
                <div *ngIf="!position.quantity" class="availability blue-text center mt4">очікується</div>
            </div>
            <div class="card-action mt0 center-align" (click)="onSelectBrandPosition(position)">
                <button class="add waves-effect waves-light btn " (click)="open1()" [disabled]="!position.quantity"><i
                        class="addIcon material-icons ">shopping_cart</i></button>
            </div>
            <div class="card-reveal">
                <span class="card-title text-size grey lighten-5">{{position.name}}<i
                        class="material-icons right">close</i></span>
                <p>{{position.description}}</p>
            </div>
        </div>
        <div class="col s12">
            <pagination-controls (pageChange)="p = $event" previousLabel="" nextLabel=""></pagination-controls>
        </div>
    </div>
    <ng-template>
        <div class="center-align mt4">Збіг не знайдено!</div>
    </ng-template>
</div>

<div class="modal" #modal>
    <div *ngFor="let position of foundPositions">
        <div *ngIf="position._id == positionId">
            <div class="modal-content">
                <span>Найменування товару: {{position.name}}</span>
                <span class="right">Ціна: {{position.cost}} UAH</span>
                <input #quantityInput id="pos-quantity" type="number" [(ngModel)]="position.orderQuantity">
                <label for="pos-quantity">Кількість</label>
            </div>
            <div class="modal-footer">
                <button type="button" (click)="onCancel()" class="modal-action waves-effect waves-black btn-flat">
                    Скасувати
                </button>
                <button class="modal-action btn waves-effect btn-small" type="submit" (click)="addToCart(position)" [disabled]="!position.orderQuantity">
                    Додати в кошик
                </button>
            </div>
        </div>
    </div>
</div>

<div class="modal" #modal1>
    <div *ngFor="let position of brandPositions">
        <div *ngIf="position._id == positionId">
            <div class="modal-content">
                <span>Найменування товару: {{position.name}}</span>
                <span class="right">Ціна: {{position.cost}} UAH</span>
                <input #quantityInput id="pos-quantity" type="number" [(ngModel)]="position.orderQuantity">
                <label for="pos-quantity">Кількість</label>
            </div>
            <div class="modal-footer">
                <button type="button" (click)="onCancel1()" class="modal-action waves-effect waves-black btn-flat">
                    Скасувати
                </button>
                <button class="modal-action btn waves-effect btn-small" type="submit" (click)="addToCart(position)" [disabled]="!position.orderQuantity">
                    Додати в кошик
                </button>
            </div>
        </div>
    </div>
</div>